<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<body>
    <ui:composition template="../../WEB-INF/templates/plantilla.xhtml">
        <ui:define name="title">Principal</ui:define>
        <ui:define name="content">
        	<h:form>
	            <h2>Nueva Nota</h2>
	            <p:messages for="mensajesRegistro" showDetail="true">
	            	<p:autoUpdate />
	            </p:messages>
	            <h:panelGrid id="crearNota" columns="2">
	                <p:outputLabel for="categoria">Categoria</p:outputLabel>
	                <!-- Lo suyo sería utilizar un converter, pero de momento y como estámos utilizando JPA cuando le establecemos
	                	el código a la categoría que tiene nota y esta nota la persistimos, directamente crea la relación con el
	                	correspondiente (registro) categoría que tenga ese código -->
	                <p:selectOneMenu id="categoria" value="#{notaController.nota.categoria.codigo}">
	                	<f:selectItem itemDisabled="true" itemLabel="SELECCIONE"/>
	                	<f:selectItems value="#{notaController.lCategorias}" var="categoria" itemLabel="#{categoria.nombre}" itemValue="#{categoria.codigo}"/>
	                </p:selectOneMenu>
	                
	                <p:outputLabel for="encabezado">Encabezado</p:outputLabel>
	                <p:inputText id="encabezado" value="#{notaController.nota.encabezado}" required="true"/>
	                
	                <p:outputLabel for="contenido">Contenido</p:outputLabel>
	                <p:inputText id="contenido" value="#{notaController.nota.cuerpo}" required="true"/>
	            </h:panelGrid>
	            <p:commandButton value="Registrar" update="crearNota" actionListener="#{notaController.registrarNota}" />
	            <!--Hola usuario: #{menuController.mostrarUsuarioLogueado()}-->
            </h:form>
        </ui:define>
    </ui:composition>
</body>
</html>